"use babel";

describe('Utility functions', function () {
  var utility = require('../lib/utility.js');

  beforeEach(function () {
    waitsForPromise(function () {
      atom.config.set('linter-gcc.execPath', '/usr/bin/g++');
      atom.config.set('linter-gcc.gccDefaultCFlags', '-Wall');
      atom.config.set('linter-gcc.gccDefaultCppFlags', '-Wall -std=c++11');
      atom.config.set('linter-gcc.gccErrorLimit', 15);
      atom.config.set('linter-gcc.gccIncludePaths', ' ');
      atom.config.set('linter-gcc.gccSuppressWarnings', true);
      atom.config.set('linter-gcc.gccLintOnTheFly', false);
      atom.config.set('linter-gcc.gccDebug', false);
      atom.config.set('linter-gcc.gccErrorString', 'error');
      atom.config.set('linter-gcc.gccWarningString', 'warning');
      atom.config.set('linter-gcc.gccNoteString', 'note');
      atom.packages.activatePackage("language-c");
      atom.packages.activatePackage("language-javascript");
      return atom.packages.activatePackage('linter-gcc');
    });
  });

  it('returns an editor for a C++ file', function () {
    waitsForPromise(function () {
      return atom.workspace.open(__dirname + '/files/missing_include.cpp').then(function (editor) {
        expect(utility.getValidEditor(editor)).toBeDefined();
      });
    });
  });

  it('returns an editor for a C file', function () {
    waitsForPromise(function () {
      return atom.workspace.open(__dirname + '/files/missing_include.c').then(function (editor) {
        expect(utility.getValidEditor(editor)).toBeDefined();
      });
    });
  });

  it('returns undefined for a javascript file', function () {
    waitsForPromise(function () {
      return atom.workspace.open(__dirname + '/../lib/utility.js').then(function (editor) {
        expect(utility.getValidEditor(editor)).not.toBeDefined();
      });
    });
  });

  it('returns no subdirectories for an empty directory', function () {
    list = [];
    expect(utility.walkSync(__dirname + "/files/project_test/sub1/subsub1/")).toEqual([]);
  });

  it('returns one subdirectory correctly', function () {
    list = [];
    expect(utility.walkSync(__dirname + "/files/project_test/sub1")).toEqual([__dirname + "/files/project_test/sub1/subsub1"]);
  });

  it('returns multiple subdirectories correctly', function () {
    list = [];
    expect(utility.walkSync(__dirname + "/files/project_test")).toEqual([__dirname + "/files/project_test/sub1", __dirname + "/files/project_test/sub1/subsub1", __dirname + "/files/project_test/sub2", __dirname + "/files/project_test/sub4", __dirname + "/files/project_test/sub4/subsub2"]);
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Rha2Fha2kvLmF0b20vcGFja2FnZXMvbGludGVyLWdjYy9zcGVjL3V0aWxpdHktc3BlYy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxXQUFXLENBQUM7O0FBRVosUUFBUSxDQUFDLG1CQUFtQixFQUFFLFlBQU07QUFDbEMsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUE7O0FBRTVDLFlBQVUsQ0FBQyxZQUFNO0FBQ2YsbUJBQWUsQ0FBQyxZQUFNO0FBQ3BCLFVBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLHFCQUFxQixFQUFFLGNBQWMsQ0FBQyxDQUFBO0FBQ3RELFVBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLDZCQUE2QixFQUFFLE9BQU8sQ0FBQyxDQUFBO0FBQ3ZELFVBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLCtCQUErQixFQUFFLGtCQUFrQixDQUFDLENBQUE7QUFDcEUsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsMEJBQTBCLEVBQUUsRUFBRSxDQUFDLENBQUE7QUFDL0MsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsNEJBQTRCLEVBQUUsR0FBRyxDQUFDLENBQUE7QUFDbEQsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsZ0NBQWdDLEVBQUUsSUFBSSxDQUFDLENBQUE7QUFDdkQsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsNEJBQTRCLEVBQUUsS0FBSyxDQUFDLENBQUE7QUFDcEQsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMscUJBQXFCLEVBQUUsS0FBSyxDQUFDLENBQUE7QUFDN0MsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLEVBQUUsT0FBTyxDQUFDLENBQUE7QUFDckQsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsNkJBQTZCLEVBQUUsU0FBUyxDQUFDLENBQUE7QUFDekQsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsMEJBQTBCLEVBQUUsTUFBTSxDQUFDLENBQUE7QUFDbkQsVUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLENBQUE7QUFDM0MsVUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMscUJBQXFCLENBQUMsQ0FBQTtBQUNwRCxhQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxDQUFBO0tBQ25ELENBQUMsQ0FBQTtHQUNILENBQUMsQ0FBQTs7QUFFRixJQUFFLENBQUMsa0NBQWtDLEVBQUUsWUFBTTtBQUMzQyxtQkFBZSxDQUFDLFlBQU07QUFDcEIsYUFBTyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsNEJBQTRCLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQSxNQUFNLEVBQUk7QUFDbEYsY0FBTSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztPQUN0RCxDQUFDLENBQUE7S0FDSCxDQUFDLENBQUE7R0FDSCxDQUFDLENBQUE7O0FBRUYsSUFBRSxDQUFDLGdDQUFnQyxFQUFFLFlBQU07QUFDekMsbUJBQWUsQ0FBQyxZQUFNO0FBQ3BCLGFBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLDBCQUEwQixDQUFDLENBQUMsSUFBSSxDQUFDLFVBQUEsTUFBTSxFQUFJO0FBQ2hGLGNBQU0sQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7T0FDdEQsQ0FBQyxDQUFBO0tBQ0gsQ0FBQyxDQUFBO0dBQ0gsQ0FBQyxDQUFBOztBQUVGLElBQUUsQ0FBQyx5Q0FBeUMsRUFBRSxZQUFNO0FBQ2xELG1CQUFlLENBQUMsWUFBTTtBQUNwQixhQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxvQkFBb0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFBLE1BQU0sRUFBSTtBQUMxRSxjQUFNLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FBQztPQUMxRCxDQUFDLENBQUE7S0FDSCxDQUFDLENBQUE7R0FDSCxDQUFDLENBQUE7O0FBRUYsSUFBRSxDQUFDLGtEQUFrRCxFQUFFLFlBQU07QUFDM0QsUUFBSSxHQUFHLEVBQUUsQ0FBQTtBQUNULFVBQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFNBQVMsR0FBRyxtQ0FBbUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0dBQ3ZGLENBQUMsQ0FBQTs7QUFFRixJQUFFLENBQUMsb0NBQW9DLEVBQUUsWUFBTTtBQUM3QyxRQUFJLEdBQUcsRUFBRSxDQUFBO0FBQ1QsVUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsU0FBUyxHQUFHLDBCQUEwQixDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLEdBQUcsa0NBQWtDLENBQUMsQ0FBQyxDQUFDO0dBQzVILENBQUMsQ0FBQTs7QUFFRixJQUFFLENBQUMsMkNBQTJDLEVBQUUsWUFBTTtBQUNwRCxRQUFJLEdBQUcsRUFBRSxDQUFBO0FBQ1QsVUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsU0FBUyxHQUFHLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FDbEUsU0FBUyxHQUFHLDBCQUEwQixFQUN0QyxTQUFTLEdBQUcsa0NBQWtDLEVBQzlDLFNBQVMsR0FBRywwQkFBMEIsRUFDdEMsU0FBUyxHQUFHLDBCQUEwQixFQUN0QyxTQUFTLEdBQUcsa0NBQWtDLENBQy9DLENBQUMsQ0FBQztHQUNKLENBQUMsQ0FBQTtDQUNILENBQUMsQ0FBQSIsImZpbGUiOiIvaG9tZS90YWthYWtpLy5hdG9tL3BhY2thZ2VzL2xpbnRlci1nY2Mvc3BlYy91dGlsaXR5LXNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBiYWJlbFwiO1xuXG5kZXNjcmliZSgnVXRpbGl0eSBmdW5jdGlvbnMnLCAoKSA9PiB7XG4gIGNvbnN0IHV0aWxpdHkgPSByZXF1aXJlKCcuLi9saWIvdXRpbGl0eS5qcycpXG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgd2FpdHNGb3JQcm9taXNlKCgpID0+IHtcbiAgICAgIGF0b20uY29uZmlnLnNldCgnbGludGVyLWdjYy5leGVjUGF0aCcsICcvdXNyL2Jpbi9nKysnKVxuICAgICAgYXRvbS5jb25maWcuc2V0KCdsaW50ZXItZ2NjLmdjY0RlZmF1bHRDRmxhZ3MnLCAnLVdhbGwnKVxuICAgICAgYXRvbS5jb25maWcuc2V0KCdsaW50ZXItZ2NjLmdjY0RlZmF1bHRDcHBGbGFncycsICctV2FsbCAtc3RkPWMrKzExJylcbiAgICAgIGF0b20uY29uZmlnLnNldCgnbGludGVyLWdjYy5nY2NFcnJvckxpbWl0JywgMTUpXG4gICAgICBhdG9tLmNvbmZpZy5zZXQoJ2xpbnRlci1nY2MuZ2NjSW5jbHVkZVBhdGhzJywgJyAnKVxuICAgICAgYXRvbS5jb25maWcuc2V0KCdsaW50ZXItZ2NjLmdjY1N1cHByZXNzV2FybmluZ3MnLCB0cnVlKVxuICAgICAgYXRvbS5jb25maWcuc2V0KCdsaW50ZXItZ2NjLmdjY0xpbnRPblRoZUZseScsIGZhbHNlKVxuICAgICAgYXRvbS5jb25maWcuc2V0KCdsaW50ZXItZ2NjLmdjY0RlYnVnJywgZmFsc2UpXG4gICAgICBhdG9tLmNvbmZpZy5zZXQoJ2xpbnRlci1nY2MuZ2NjRXJyb3JTdHJpbmcnLCAnZXJyb3InKVxuICAgICAgYXRvbS5jb25maWcuc2V0KCdsaW50ZXItZ2NjLmdjY1dhcm5pbmdTdHJpbmcnLCAnd2FybmluZycpXG4gICAgICBhdG9tLmNvbmZpZy5zZXQoJ2xpbnRlci1nY2MuZ2NjTm90ZVN0cmluZycsICdub3RlJylcbiAgICAgIGF0b20ucGFja2FnZXMuYWN0aXZhdGVQYWNrYWdlKFwibGFuZ3VhZ2UtY1wiKVxuICAgICAgYXRvbS5wYWNrYWdlcy5hY3RpdmF0ZVBhY2thZ2UoXCJsYW5ndWFnZS1qYXZhc2NyaXB0XCIpXG4gICAgICByZXR1cm4gYXRvbS5wYWNrYWdlcy5hY3RpdmF0ZVBhY2thZ2UoJ2xpbnRlci1nY2MnKVxuICAgIH0pXG4gIH0pXG5cbiAgaXQoJ3JldHVybnMgYW4gZWRpdG9yIGZvciBhIEMrKyBmaWxlJywgKCkgPT4ge1xuICAgIHdhaXRzRm9yUHJvbWlzZSgoKSA9PiB7XG4gICAgICByZXR1cm4gYXRvbS53b3Jrc3BhY2Uub3BlbihfX2Rpcm5hbWUgKyAnL2ZpbGVzL21pc3NpbmdfaW5jbHVkZS5jcHAnKS50aGVuKGVkaXRvciA9PiB7XG4gICAgICAgIGV4cGVjdCh1dGlsaXR5LmdldFZhbGlkRWRpdG9yKGVkaXRvcikpLnRvQmVEZWZpbmVkKCk7XG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG5cbiAgaXQoJ3JldHVybnMgYW4gZWRpdG9yIGZvciBhIEMgZmlsZScsICgpID0+IHtcbiAgICB3YWl0c0ZvclByb21pc2UoKCkgPT4ge1xuICAgICAgcmV0dXJuIGF0b20ud29ya3NwYWNlLm9wZW4oX19kaXJuYW1lICsgJy9maWxlcy9taXNzaW5nX2luY2x1ZGUuYycpLnRoZW4oZWRpdG9yID0+IHtcbiAgICAgICAgZXhwZWN0KHV0aWxpdHkuZ2V0VmFsaWRFZGl0b3IoZWRpdG9yKSkudG9CZURlZmluZWQoKTtcbiAgICAgIH0pXG4gICAgfSlcbiAgfSlcblxuICBpdCgncmV0dXJucyB1bmRlZmluZWQgZm9yIGEgamF2YXNjcmlwdCBmaWxlJywgKCkgPT4ge1xuICAgIHdhaXRzRm9yUHJvbWlzZSgoKSA9PiB7XG4gICAgICByZXR1cm4gYXRvbS53b3Jrc3BhY2Uub3BlbihfX2Rpcm5hbWUgKyAnLy4uL2xpYi91dGlsaXR5LmpzJykudGhlbihlZGl0b3IgPT4ge1xuICAgICAgICBleHBlY3QodXRpbGl0eS5nZXRWYWxpZEVkaXRvcihlZGl0b3IpKS5ub3QudG9CZURlZmluZWQoKTtcbiAgICAgIH0pXG4gICAgfSlcbiAgfSlcblxuICBpdCgncmV0dXJucyBubyBzdWJkaXJlY3RvcmllcyBmb3IgYW4gZW1wdHkgZGlyZWN0b3J5JywgKCkgPT4ge1xuICAgIGxpc3QgPSBbXVxuICAgIGV4cGVjdCh1dGlsaXR5LndhbGtTeW5jKF9fZGlybmFtZSArIFwiL2ZpbGVzL3Byb2plY3RfdGVzdC9zdWIxL3N1YnN1YjEvXCIpKS50b0VxdWFsKFtdKTtcbiAgfSlcblxuICBpdCgncmV0dXJucyBvbmUgc3ViZGlyZWN0b3J5IGNvcnJlY3RseScsICgpID0+IHtcbiAgICBsaXN0ID0gW11cbiAgICBleHBlY3QodXRpbGl0eS53YWxrU3luYyhfX2Rpcm5hbWUgKyBcIi9maWxlcy9wcm9qZWN0X3Rlc3Qvc3ViMVwiKSkudG9FcXVhbChbX19kaXJuYW1lICsgXCIvZmlsZXMvcHJvamVjdF90ZXN0L3N1YjEvc3Vic3ViMVwiXSk7XG4gIH0pXG5cbiAgaXQoJ3JldHVybnMgbXVsdGlwbGUgc3ViZGlyZWN0b3JpZXMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgIGxpc3QgPSBbXVxuICAgIGV4cGVjdCh1dGlsaXR5LndhbGtTeW5jKF9fZGlybmFtZSArIFwiL2ZpbGVzL3Byb2plY3RfdGVzdFwiKSkudG9FcXVhbChbXG4gICAgICBfX2Rpcm5hbWUgKyBcIi9maWxlcy9wcm9qZWN0X3Rlc3Qvc3ViMVwiLFxuICAgICAgX19kaXJuYW1lICsgXCIvZmlsZXMvcHJvamVjdF90ZXN0L3N1YjEvc3Vic3ViMVwiLFxuICAgICAgX19kaXJuYW1lICsgXCIvZmlsZXMvcHJvamVjdF90ZXN0L3N1YjJcIixcbiAgICAgIF9fZGlybmFtZSArIFwiL2ZpbGVzL3Byb2plY3RfdGVzdC9zdWI0XCIsXG4gICAgICBfX2Rpcm5hbWUgKyBcIi9maWxlcy9wcm9qZWN0X3Rlc3Qvc3ViNC9zdWJzdWIyXCJcbiAgICBdKTtcbiAgfSlcbn0pXG4iXX0=
//# sourceURL=/home/takaaki/.atom/packages/linter-gcc/spec/utility-spec.js
